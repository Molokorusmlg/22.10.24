const user = new User();
const modal = new Modal();

// –ë—É—Ä–≥–µ—Ä –º–µ–Ω—é
function setShowBurgerMenu() {
  const burger = document.querySelector(".burger__meny");
  if (!burger.classList.contains("base")) {
    if (burger.classList.contains("bhide")) {
      burger.classList.remove("bhide");
      burger.classList.add("bvis");
    } else {
      burger.classList.add("bhide");
      burger.classList.remove("bvis");
    }
  } else {
    burger.classList.remove("base");
    burger.classList.add("bvis");
  }
}

// –°–º–µ–Ω–∞ –∑–∞–¥–Ω–µ–≥–æ —Ñ–æ–Ω–∞ –∏ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
function showEkb() {
  if (mainPage.className === "about__background_main") {
    titleEkb.innerHTML = `<h1 class="about__city__title">–≥–æ—Ä–æ–¥ –±–µ—Å–æ–≤üòà</h1>`;
    textEkb.innerHTML = `<p class="about__city__text">
          –°–∞–º—ã–π –∫—Ä—É—Ç–æ–π –≥–æ—Ä–æ–¥ –Ω–∞ –†—É—Å–∏. –°–∞–º—ã–π –º–æ–¥–Ω—ã–π –∏ –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–π!
        </p>`;
    mainPage.classList.add("zloiEKB");
    mainPage.classList.remove("about__background_main");
  } else {
    titleEkb.innerHTML = `<h1 class="about__city__title">–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥</h1>`;
    textEkb.innerHTML = `<p class="about__city__text">
          –ì–ª–∞–≤–Ω—ã–π –≥–æ—Ä–æ–¥ –°–≤–µ—Ä–¥–ª–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏. –≠—Ç–∞–ª–æ–Ω –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞,
          –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–∏–∑–º–∞ –∏ –ø–æ—Å—Ç–º–æ–¥–µ—Ä–Ω–∏–∑–º–∞ –≤ –æ–¥–Ω–æ–º –ª–∏—Ü–µ
        </p>`;
    mainPage.classList.add("about__background_main");
    mainPage.classList.remove("zloiEKB");
  }
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∞–¥–º–∏–Ω–∞
function showAdminPanel() {
  const isAdmin = localStorage.getItem("admin");

  if (isAdmin === "false") return;
  const parentLinks = document.querySelector(".admin__panel__link");
  const adminPanelLink = `<a class = "header__link" href="../adminpanel/adminpanel.html">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a>`;
  parentLinks.innerHTML = adminPanelLink;
}

// –£–±–∏—Ä–∞–µ–º —Ç–µ–∫—Å—Ç, –æ—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–∞—Ä—Ç—É –≥–æ—Ä–æ–¥–∞
function hideText() {
  const isMapSmall = mapEkb.className === "map_small";

  mapText.classList.replace(
    isMapSmall ? "no-route" : "route",
    isMapSmall ? "route" : "no-route"
  );

  arrowMap.classList.replace(
    isMapSmall ? "arrow__map" : "arrow__map_hiden",
    isMapSmall ? "arrow__map_hiden" : "arrow__map"
  );

  mapEkb.classList.replace(
    isMapSmall ? "map_small" : "mapbig",
    isMapSmall ? "mapbig" : "map_small"
  );
}

// –ó–∞–≥—Ä—É–∑–∫–∞
async function loadingPage() {
  await user.setUpUserDataInLocalStorage();
  showAdminPanel();
  Loading.classList.remove("active__loading");
  Loading.classList.add("loading-complete");
}

loadingPage();
